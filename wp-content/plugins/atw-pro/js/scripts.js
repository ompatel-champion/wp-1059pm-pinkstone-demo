(function($){	var tableRowTemplate = '<tr valign="top"><th scrope="row"> <label for="">Name:</label> </th> <td> <input size="30" type="text" id="condition-%id-name" name="atw[condition][%id][name]"/> </td> </tr> <tr valign="top"> <th scrope="row"> <label for="">Code:</label> </th> <td> <input size="60" type="text" id="condition-%id-code" name="atw[condition][%id][code]"/> </td> </tr>';	var __obj =	{		ui: {},		init : function()		{			this.setUI();			this.updateStyles();			this.setEvents();		},		setUI: function()		{		    var that = this;			this.ui.formTable = $('table.form-table');			this.ui.addBtn    = $('#condition-add-new');            this.ui.formTable.find('input[id$="name"]').each(                function()                {                    that.renderDeleteBtn($(this).parent());                }            )		},		updateStyles: function()		{            this.ui.formTable.find('tr').css({'background' : '#fff', 'border': 'none'});			$('.form-table tr:nth-child(4n+3)').css({"background" : "#f1f1f1"});			$('.form-table tr:nth-child(4n+4)').css(			    {			        'background':       '#f1f1f1',                    'border-bottom':    '1px solid #ccc'			    });            $('.delete-condition-btn').css(                {                    'position': 'absolute',                    'top':      '15px',                    'right':    '15px'                });			this.ui.addBtn.parent().parent().css({"background" : "white"});		},		setEvents: function()		{			var that = this;            // Add Condition			this.ui.addBtn.on('click',                function()                {                    that.addNewCondition();                    that.updateStyles();                });            // Delete Condition            $(document).on('click', '.delete-condition-btn',                function()                {                    var conditionId = $(this).data('conditionId');                    that.deleteCondition(conditionId);                });		},		// Returns list of all condition rows		getConditionRows: function()		{			return this.ui.addBtn.parent().parent();		},		// Adds new condition rows to the table		addNewCondition: function()		{			var rows = $(tableRowTemplate.replace(/%id/gi, this.createId()));            this.getConditionRows().before(rows);            this.renderDeleteBtn($(rows[0]).find('td'));		},        deleteCondition: function(conditionId)        {            var message = $('<td colspan="2">Do not forget to SAVE at the bottom of the page.</td>')                .css(                    {                        'text-align':   'center',                        'background':   '#A5F0FF'                    });            var tr =  this.ui.formTable.find('#condition-'+ conditionId +'-name').closest('tr');            tr.empty().append(message).closest('tr').fadeOut(2000, function(){$(this.remove())});            this.ui.formTable.find('#condition-'+ conditionId +'-code').closest('tr').remove();            this.updateStyles();        },        renderDeleteBtn: function(destination)        {            // add delete button            var delBtn = $('<input type="button" value="Delete" class="delete-condition-btn button">')                .css(                    {                        'position': 'absolute',                        'top':      '10px',                        'right':    '10px'                    }                );            delBtn.data('conditionId', $(destination).find('input').attr('id').match(/\d+/g));            $(destination)                .css({'position' : 'relative'})                .append(delBtn);        },        createId: function()        {            return parseInt($('.form-table:first tr  input[id$="-code"]:last').attr('id').match(/\d+/g)) + 1;        }	};	$(document).ready(		function()		{			__obj.init();		});})(jQuery);